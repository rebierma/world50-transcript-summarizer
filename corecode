<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>World50 Call Transcript Summarizer</title>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, 'Helvetica Neue', Arial, sans-serif;
            line-height: 1.6;
            color: #333;
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            min-height: 100vh;
            padding: 2rem;
        }

        .container {
            max-width: 1200px;
            margin: 0 auto;
        }

        header {
            background: white;
            border-radius: 12px;
            padding: 2rem;
            margin-bottom: 2rem;
            box-shadow: 0 10px 30px rgba(0,0,0,0.1);
        }

        h1 {
            color: #667eea;
            font-size: 2rem;
            margin-bottom: 0.5rem;
        }

        .subtitle {
            color: #666;
        }

        .main-content {
            background: white;
            border-radius: 12px;
            padding: 2rem;
            box-shadow: 0 10px 30px rgba(0,0,0,0.1);
        }

        .form-group {
            margin-bottom: 1.5rem;
        }

        label {
            display: block;
            font-weight: 600;
            margin-bottom: 0.5rem;
            color: #333;
        }

        input[type="text"],
        input[type="password"],
        textarea {
            width: 100%;
            padding: 0.75rem;
            border: 2px solid #e5e7eb;
            border-radius: 8px;
            font-size: 1rem;
            font-family: inherit;
            transition: border-color 0.3s ease;
        }

        input[type="text"]:focus,
        input[type="password"]:focus,
        textarea:focus {
            outline: none;
            border-color: #667eea;
        }

        textarea {
            min-height: 300px;
            font-family: 'Courier New', monospace;
            resize: vertical;
        }

        .button-group {
            display: flex;
            gap: 1rem;
            margin-top: 1.5rem;
        }

        button {
            padding: 0.75rem 2rem;
            border: none;
            border-radius: 8px;
            font-size: 1rem;
            font-weight: 600;
            cursor: pointer;
            transition: all 0.3s ease;
        }

        .btn-primary {
            background: #667eea;
            color: white;
        }

        .btn-primary:hover {
            background: #5568d3;
            transform: translateY(-2px);
            box-shadow: 0 4px 12px rgba(102, 126, 234, 0.4);
        }

        .btn-primary:disabled {
            background: #9ca3af;
            cursor: not-allowed;
            transform: none;
        }

        .btn-secondary {
            background: #f3f4f6;
            color: #374151;
        }

        .btn-secondary:hover {
            background: #e5e7eb;
        }

        .output-section {
            margin-top: 2rem;
            padding-top: 2rem;
            border-top: 2px solid #e5e7eb;
        }

        .output-box {
            background: #f9fafb;
            border: 2px solid #e5e7eb;
            border-radius: 8px;
            padding: 1.5rem;
            min-height: 200px;
            white-space: pre-wrap;
            font-family: inherit;
        }

        .status-message {
            padding: 1rem;
            border-radius: 8px;
            margin-bottom: 1rem;
            font-weight: 500;
        }

        .status-success {
            background: #d1fae5;
            color: #065f46;
            border: 1px solid #6ee7b7;
        }

        .status-error {
            background: #fee2e2;
            color: #991b1b;
            border: 1px solid #fca5a5;
        }

        .status-info {
            background: #dbeafe;
            color: #1e40af;
            border: 1px solid #93c5fd;
        }

        .hidden {
            display: none;
        }

        .api-key-section {
            background: #fef3c7;
            border: 2px solid #fbbf24;
            border-radius: 8px;
            padding: 1.5rem;
            margin-bottom: 2rem;
        }

        .api-key-section h3 {
            color: #92400e;
            margin-bottom: 0.5rem;
        }

        .api-key-section p {
            color: #78350f;
            font-size: 0.9rem;
            margin-bottom: 1rem;
        }

        .copy-button {
            background: #10b981;
            color: white;
            padding: 0.5rem 1rem;
            font-size: 0.9rem;
        }

        .copy-button:hover {
            background: #059669;
        }

        .instructions {
            background: #f0f9ff;
            border-left: 4px solid #0284c7;
            padding: 1rem;
            margin-bottom: 1.5rem;
            border-radius: 4px;
        }

        .instructions h3 {
            color: #0c4a6e;
            margin-bottom: 0.5rem;
        }

        .instructions ol {
            margin-left: 1.5rem;
            color: #0369a1;
        }

        .instructions li {
            margin-bottom: 0.5rem;
        }

        @media (max-width: 768px) {
            body {
                padding: 1rem;
            }

            h1 {
                font-size: 1.5rem;
            }

            .button-group {
                flex-direction: column;
            }

            button {
                width: 100%;
            }
        }
    </style>
</head>
<body>
    <div class="container">
        <header>
            <h1>World50 Call Transcript Summarizer</h1>
            <p class="subtitle">Powered by Claude AI</p>
        </header>

        <div class="main-content">
            <div class="api-key-section">
                <h3>‚ö†Ô∏è API Key Required</h3>
                <p>You need an Anthropic API key to use this tool. Get one at <a href="https://console.anthropic.com" target="_blank">console.anthropic.com</a></p>
                <div class="form-group">
                    <label for="apiKey">Anthropic API Key</label>
                    <input type="password" id="apiKey" placeholder="sk-ant-...">
                </div>
            </div>

            <div class="instructions">
                <h3>How to Use</h3>
                <ol>
                    <li>Enter your Anthropic API key above (it's stored locally in your browser)</li>
                    <li>Paste your Zoom call transcript below</li>
                    <li>Click "Generate Summary"</li>
                    <li>Copy the formatted summary and email it or use it as needed</li>
                </ol>
            </div>

            <div id="statusMessage" class="hidden"></div>

            <div class="form-group">
                <label for="transcript">Call Transcript</label>
                <textarea id="transcript" placeholder="Paste your Zoom transcript here..."></textarea>
            </div>

            <div class="button-group">
                <button class="btn-primary" id="generateBtn" onclick="generateSummary()">
                    Generate Summary
                </button>
                <button class="btn-secondary" onclick="clearForm()">
                    Clear
                </button>
            </div>

            <div class="output-section hidden" id="outputSection">
                <h2 style="color: #667eea; margin-bottom: 1rem;">Summary</h2>
                <div class="output-box" id="summaryOutput"></div>
                <div class="button-group">
                    <button class="copy-button" onclick="copySummary()">
                        üìã Copy Summary
                    </button>
                </div>
            </div>
        </div>
    </div>

    <script>
        // Load saved API key from localStorage
        window.addEventListener('DOMContentLoaded', () => {
            const savedApiKey = localStorage.getItem('anthropicApiKey');
            if (savedApiKey) {
                document.getElementById('apiKey').value = savedApiKey;
            }
        });

        // Save API key to localStorage when changed
        document.getElementById('apiKey').addEventListener('change', (e) => {
            localStorage.setItem('anthropicApiKey', e.target.value);
        });

        function showStatus(message, type) {
            const statusDiv = document.getElementById('statusMessage');
            statusDiv.className = `status-message status-${type}`;
            statusDiv.textContent = message;
            statusDiv.classList.remove('hidden');
            
            if (type === 'success' || type === 'info') {
                setTimeout(() => {
                    statusDiv.classList.add('hidden');
                }, 5000);
            }
        }

        async function generateSummary() {
            const apiKey = document.getElementById('apiKey').value.trim();
            const transcript = document.getElementById('transcript').value.trim();
            const generateBtn = document.getElementById('generateBtn');

            // Validation
            if (!apiKey) {
                showStatus('Please enter your Anthropic API key', 'error');
                return;
            }

            if (!transcript) {
                showStatus('Please paste a transcript', 'error');
                return;
            }

            // Disable button and show loading
            generateBtn.disabled = true;
            generateBtn.textContent = 'Generating...';
            showStatus('Analyzing transcript with Claude...', 'info');

            const systemPrompt = `You are a business communications analyst. Generate detailed summaries of call transcripts for executive audiences. Follow the exact format and guidelines provided in each request. Use clear, professional language. Keep summaries under 750 words. Avoid company-specific names unless critical for context.`;

            const userPrompt = `Analyze the attached call transcript and generate a detailed summary suitable for business communications. The format should include boldface headings for each section, and a bullet-point format for the points that accompany each section. Only use information that is included in this transcript. In cases where noted, outside information may be used to add context to the information being shared, but may not be presented as if part of the conversation.

The summary should be structured into clear sections covering:

Introductory paragraph 50 words or less, identifying what group gathered, their function within their companies and the date. This section should appear in italics.

**Three Key Takeaways**
- Present each takeaway as its own section, with a bold face headline stating the thesis, a 25-word explanation of the thesis and three supporting bullet points that prove the thesis to be correct.
- Key takeaways should be relevant to a business practitioner and support their decision-making.

**Important Quotes**
- Extract three important, verbatim quotes from the conversation that add insight to the summary. The quotes should have meaning as stand-alone pieces of content, and should not include jargon.

**Areas of Disagreement**
- Summarize notable viewpoints, predictions, and insights.
- Emphasize expert opinions on macro trends, business impact, and policy implications
- You may use outside information from reputable sources to add context, or illuminate areas where the ideas in this transcript are different than other authoritative sources.

Ensure the summary is structured, well-organized, and suitable for an executive audience. Use clear and professional language, with a word limit of 750 words or fewer, emphasizing the most important ideas discussed. Do not use specific company names. Instead identify companies by their industry, such as "a company in the beverage industry."

TRANSCRIPT:
${transcript}`;

            try {
                const response = await fetch('https://api.anthropic.com/v1/messages', {
                    method: 'POST',
                    headers: {
                        'Content-Type': 'application/json',
                        'x-api-key': apiKey,
                        'anthropic-version': '2023-06-01'
                    },
                    body: JSON.stringify({
                        model: 'claude-sonnet-4-20250514',
                        max_tokens: 4000,
                        system: systemPrompt,
                        messages: [
                            {
                                role: 'user',
                                content: userPrompt
                            }
                        ]
                    })
                });

                if (!response.ok) {
                    const error = await response.json();
                    throw new Error(error.error?.message || 'API request failed');
                }

                const data = await response.json();
                const summary = data.content[0].text;

                // Display the summary
                document.getElementById('summaryOutput').textContent = summary;
                document.getElementById('outputSection').classList.remove('hidden');
                
                showStatus('‚úì Summary generated successfully!', 'success');
                
                // Scroll to output
                document.getElementById('outputSection').scrollIntoView({ 
                    behavior: 'smooth', 
                    block: 'start' 
                });

            } catch (error) {
                showStatus(`Error: ${error.message}`, 'error');
                console.error('Error:', error);
            } finally {
                generateBtn.disabled = false;
                generateBtn.textContent = 'Generate Summary';
            }
        }

        function clearForm() {
            document.getElementById('transcript').value = '';
            document.getElementById('summaryOutput').textContent = '';
            document.getElementById('outputSection').classList.add('hidden');
            document.getElementById('statusMessage').classList.add('hidden');
        }

        function copySummary() {
            const summary = document.getElementById('summaryOutput').textContent;
            navigator.clipboard.writeText(summary).then(() => {
                showStatus('‚úì Summary copied to clipboard!', 'success');
            }).catch(err => {
                showStatus('Failed to copy summary', 'error');
                console.error('Copy failed:', err);
            });
        }

        // Allow Enter key in textarea
        document.getElementById('transcript').addEventListener('keydown', (e) => {
            if (e.key === 'Enter' && e.ctrlKey) {
                generateSummary();
            }
        });
    </script>
</body>
</html>
